if (has_key) {
    current_state = STATES.IDLE_WITH_KEY;
} else current_state = STATES.IDLE;